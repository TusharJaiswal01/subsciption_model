
## ğŸ“ Project Structure
```
subscription-service/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ subscriptionController.ts
â”‚   â”‚   â””â”€â”€ planController.ts
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ Subscription.ts
â”‚   â”‚   â””â”€â”€ Plan.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ subscriptionRoutes.ts
â”‚   â”‚   â””â”€â”€ planRoutes.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ database.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ app.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

### 3. Create sample plans
```bash
curl -X POST http://localhost:3000/api/plans \
  -H "Content-Type: application/json" \
  -d '{
    "id": "basic",
    "name": "Basic Plan",
    "price": 9.99,
    "features": ["5GB Storage", "Email Support"],
    "duration": 30
  }'

curl -X POST http://localhost:3000/api/plans \
  -H "Content-Type: application/json" \
  -d '{
    "id": "premium",
    "name": "Premium Plan",
    "price": 19.99,
    "features": ["50GB Storage", "Priority Support", "Advanced Features"],
    "duration": 30
  }'
```

### 4. Get authentication token
```bash
curl -X POST http://localhost:3000/api/auth/token \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "user123",
    "email": "user@example.com"
  }'
```

### 5. Test subscription endpoints
```bash
# Create subscription
curl -X POST http://localhost:3000/api/subscriptions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6InVzZXIxMjMiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJpYXQiOjE3NDg0MzkwNTEsImV4cCI6MTc0ODUyNTQ1MX0.YvpyEBvF6u_EDhQpMEWml3tt-55xXZDtdlXQXK784WQ" \
  -d '{"planId": "basic"}'

# Get subscription
curl -X GET http://localhost:3000/api/subscriptions/user123 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6InVzZXIxMjMiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJpYXQiOjE3NDg0MzkwNTEsImV4cCI6MTc0ODUyNTQ1MX0.YvpyEBvF6u_EDhQpMEWml3tt-55xXZDtdlXQXK784WQ"

# Update subscription
curl -X PUT http://localhost:3000/api/subscriptions/user123 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6InVzZXIxMjMiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJpYXQiOjE3NDg0MzkwNTEsImV4cCI6MTc0ODUyNTQ1MX0.YvpyEBvF6u_EDhQpMEWml3tt-55xXZDtdlXQXK784WQ" \
  -d '{"planId": "premium"}'

# Cancel subscription
curl -X DELETE http://localhost:3000/api/subscriptions/user123 \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6InVzZXIxMjMiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJpYXQiOjE3NDg0MzkwNTEsImV4cCI6MTc0ODUyNTQ1MX0.YvpyEBvF6u_EDhQpMEWml3tt-55xXZDtdlXQXK784WQ"
```

## ğŸ“‹ API Endpoints Summary

| Method | Endpoint | Description | Auth Required |
|--------|----------|-------------|---------------|
| GET | `/health` | Health check | No |
| POST | `/api/auth/token` | Generate test token | No |
| GET | `/api/plans` | Get all plans | No |
| POST | `/api/plans` | Create plan | No |
| POST | `/api/subscriptions` | Create subscription | Yes |
| GET | `/api/subscriptions/{userId}` | Get subscription | Yes |
| PUT | `/api/subscriptions/{userId}` | Update subscription | Yes |
| DELETE | `/api/subscriptions/{userId}` | Cancel subscription | Yes |

## ğŸ”’ Security Features
- JWT authentication
- Rate limiting (100 requests per 15 minutes)
- Helmet.js for security headers
- CORS enabled
- Input validation
- Error handling


